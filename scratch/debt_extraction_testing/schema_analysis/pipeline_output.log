[schema_variants] LLM call attempt 1 – system prompt:
You are a research strategist charged with creating a **comprehensive extraction schema** that converts an SEC exhibit into a standardized tabular format.

Think first (internally) about:
  * Which thematic topics recur across similar exhibits.
  * Which distinct, observable facts analysts will query later.
  * Why each field is valuable downstream.

Do NOT include your reasoning in the response; return only the final JSON.

Return ONLY valid JSON with these keys:
  1. overview – Up to 10 sentences describing the purpose and coverage of the schema.
  2. topics   – Array of short phrases representing thematic areas.
  3. fields   – **Object** mapping each snake_case field name → object with:
        • description – one-sentence business meaning.
        • rationale   – why the field matters.

Do **NOT** wrap the JSON in triple back-ticks.

⚠️  Exclude generic EDGAR filing metadata (e.g., CIK, file number, exhibit number) or any information that can be reliably obtained from the filing header outside the exhibit text. Focus on facts that are observable **within the exhibit itself**.

Normal-form modelling:
If any concept in the exhibit can appear more than once, represent it as a repeating structure.
  • Define the field as an *array of objects*.
  • Attach a *json_schema* that describes the object’s keys and primitive types.
This rule applies universally; do not enumerate concrete instances.

Additional guiding principles:
• Observability – every field must be able to capture a value that is **verbatim** present in the exhibit text.  Omit fields that rely on external filing metadata or speculative information.
• Granularity – prefer the smallest unit of information that is still meaningful; for example, separate interest margin for different benchmarks instead of merging them into one generic field.
• Value–density – prioritise fields that deliver high analytical value per token.  Avoid very large arrays whose elements differ only in label (e.g., boiler-plate “Form of …” exhibit lists); use a concise summary field instead unless each element affects economics or legal obligations.
• Analytical variation – prioritise fields whose values can vary materially across documents and therefore inform downstream quantitative or logical reasoning.
• Static layout – omit fields whose primary purpose is to mirror the document’s physical structure (tables of contents, attachment labels, page numbers); if such data is still useful, summarise it in a single concise field.


Return the **most exhaustive** list of fields you reasonably expect to find across any similar exhibit (err on the side of too many).
[EXHIBIT TEXT OMITTED]
[schema_variants] LLM response (attempt 1):
{
  "overview": "This schema standardizes key economic, legal, and structural terms from a Master Credit Agreement exhibit into a tabular format. It captures parties, facility details, interest rate mechanics, maturity and repayment features, governing law, and ancillary provisions such as fees, prepayment options, covenants, and default events. Repeating concepts like multiple credit facilities, fee types, covenants, and notice rules are modeled as arrays of objects for full flexibility. Each field is based solely on text observable in the agreement. The schema omits generic EDGAR metadata and focuses on facts critical for downstream quantitative and legal analyses.",
  "topics": [
    "Parties",
    "Credit Facilities",
    "Interest Rate Terms",
    "Maturity and Repayment",
    "Governing Law",
    "Fees",
    "Prepayment",
    "Covenants",
    "Events of Default",
    "Notices",
    "Conditions Precedent",
    "Amendments",
    "Collateral"
  ],
  "fields": {
    "effective_date": {
      "description": "The date on which the agreement becomes effective.",
      "rationale": "Enables timeline analyses and linking to other instruments."
    },
    "parties": {
      "description": "List of contracting entities and their roles.",
      "rationale": "Identifies obligations and rights assigned to each party.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    "facility_terms": {
      "description": "Details of each credit facility provided under the agreement.",
      "rationale": "Captures principal amounts, currencies, durations, and amortization for risk and pricing analysis.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "facility_type": {
              "type": "string"
            },
            "facility_amount": {
              "type": "number"
            },
            "facility_currency": {
              "type": "string"
            },
            "maturity_date": {
              "type": "string"
            },
            "payment_frequency": {
              "type": "string"
            },
            "amortization_schedule": {
              "type": "string"
            },
            "interest_rate_components": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "base_rate": {
                    "type": "string"
                  },
                  "spread_bps": {
                    "type": "number"
                  }
                },
                "required": [
                  "base_rate",
                  "spread_bps"
                ]
              }
            },
            "interest_rate_floor": {
              "type": "string"
            },
            "interest_rate_cap": {
              "type": "string"
            }
          },
          "required": [
            "facility_type",
            "facility_amount",
            "facility_currency",
            "maturity_date"
          ]
        }
      }
    },
    "governing_law": {
      "description": "Jurisdiction whose laws govern the interpretation of the agreement.",
      "rationale": "Determines applicable legal regime and venue for disputes."
    },
    "choice_of_forum": {
      "description": "Designated forum or venue for resolving disputes under the agreement.",
      "rationale": "Specifies the agreed court or arbitration forum."
    },
    "fee_provisions": {
      "description": "All fees payable under the agreement, including commitment and facility fees.",
      "rationale": "Analyzes cost structure and fee income for the lender.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "fee_type": {
              "type": "string"
            },
            "fee_amount": {
              "type": "number"
            },
            "fee_currency": {
              "type": "string"
            },
            "fee_rate_bps": {
              "type": "number"
            },
            "fee_timing": {
              "type": "string"
            }
          },
          "required": [
            "fee_type"
          ]
        }
      }
    },
    "prepayment_provisions": {
      "description": "Terms governing optional or mandatory prepayments of principal.",
      "rationale": "Impacts cash flow modeling and penalty assessments.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "prepayment_type": {
              "type": "string"
            },
            "terms": {
              "type": "string"
            }
          },
          "required": [
            "prepayment_type"
          ]
        }
      }
    },
    "covenants": {
      "description": "Borrower covenants and obligations specified in the agreement.",
      "rationale": "Used to monitor compliance and trigger events of default.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "covenant_type": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "covenant_type"
          ]
        }
      }
    },
    "events_of_default": {
      "description": "Events or conditions that constitute a default under the agreement.",
      "rationale": "Identifies triggers for lender remedies and acceleration.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "event_description": {
              "type": "string"
            }
          },
          "required": [
            "event_description"
          ]
        }
      }
    },
    "notices": {
      "description": "Procedures for delivering contractual notices to each party.",
      "rationale": "Ensures enforceability of communications and waivers.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "to_party": {
              "type": "string"
            },
            "method": {
              "type": "string"
            },
            "address": {
              "type": "string"
            }
          },
          "required": [
            "to_party",
            "method"
          ]
        }
      }
    },
    "conditions_precedent": {
      "description": "Conditions that must be satisfied before funding of the facility.",
      "rationale": "Determines when lender obligations commence and risk is assumed.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "condition_text": {
              "type": "string"
            }
          },
          "required": [
            "condition_text"
          ]
        }
      }
    },
    "amendment_provisions": {
      "description": "Rules and thresholds for amending the agreement post-closing.",
      "rationale": "Defines governance for changes to material terms.",
      "json_schema": {
        "type": "object",
        "properties": {
          "amendment_conditions": {
            "type": "string"
          }
        },
        "required": [
          "amendment_conditions"
        ]
      }
    },
    "collateral_provisions": {
      "description": "Descriptions of collateral securing the obligations under the agreement.",
      "rationale": "Key input for secured lending analysis and recovery estimates.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "collateral_description": {
              "type": "string"
            },
            "security_interest": {
              "type": "string"
            },
            "lien_priority": {
              "type": "string"
            }
          },
          "required": [
            "collateral_description"
          ]
        }
      }
    }
  }
}
(pretty-printed)
[schema_variants] LLM call attempt 1 – system prompt:
You are a research strategist charged with creating a **comprehensive extraction schema** that converts an SEC exhibit into a standardized tabular format.

Think first (internally) about:
  * Which thematic topics recur across similar exhibits.
  * Which distinct, observable facts analysts will query later.
  * Why each field is valuable downstream.

Do NOT include your reasoning in the response; return only the final JSON.

Return ONLY valid JSON with these keys:
  1. overview – Up to 10 sentences describing the purpose and coverage of the schema.
  2. topics   – Array of short phrases representing thematic areas.
  3. fields   – **Object** mapping each snake_case field name → object with:
        • description – one-sentence business meaning.
        • rationale   – why the field matters.

Do **NOT** wrap the JSON in triple back-ticks.

⚠️  Exclude generic EDGAR filing metadata (e.g., CIK, file number, exhibit number) or any information that can be reliably obtained from the filing header outside the exhibit text. Focus on facts that are observable **within the exhibit itself**.

Normal-form modelling:
If any concept in the exhibit can appear more than once, represent it as a repeating structure.
  • Define the field as an *array of objects*.
  • Attach a *json_schema* that describes the object’s keys and primitive types.
This rule applies universally; do not enumerate concrete instances.

Additional guiding principles:
• Observability – every field must be able to capture a value that is **verbatim** present in the exhibit text.  Omit fields that rely on external filing metadata or speculative information.
• Granularity – prefer the smallest unit of information that is still meaningful; for example, separate interest margin for different benchmarks instead of merging them into one generic field.
• Value–density – prioritise fields that deliver high analytical value per token.  Avoid very large arrays whose elements differ only in label (e.g., boiler-plate “Form of …” exhibit lists); use a concise summary field instead unless each element affects economics or legal obligations.
• Analytical variation – prioritise fields whose values can vary materially across documents and therefore inform downstream quantitative or logical reasoning.
• Static layout – omit fields whose primary purpose is to mirror the document’s physical structure (tables of contents, attachment labels, page numbers); if such data is still useful, summarise it in a single concise field.


Return **only the absolute essentials** – the smallest set without which the exhibit is meaningless.
[EXHIBIT TEXT OMITTED]
[schema_variants] LLM response (attempt 1):
{
  "overview": "This schema captures the essential, observable provisions of a Master Credit Agreement exhibit. It extracts the transacting parties and their roles, the type and amount of the credit facility, the interest rate benchmark and spread, the effective and maturity dates, and the governing law. Each field maps directly to verbatim text in the agreement. Repeating concepts (e.g., parties) are represented as arrays of objects. The schema omits generic EDGAR metadata and focuses solely on facts within the exhibit that analysts will query. It ensures consistent downstream quantitative analysis of credit terms across similar agreements.",
  "topics": [
    "Parties and roles",
    "Facility type and amount",
    "Interest rate structure",
    "Key dates",
    "Governing law"
  ],
  "fields": {
    "parties": {
      "description": "List of entities to the agreement with their contractual roles.",
      "rationale": "Identifies each signatory and their role for counterparty analysis.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    "facility_type": {
      "description": "The category of credit facility provided (e.g., revolving credit).",
      "rationale": "Distinguishes among different financing structures and their terms."
    },
    "facility_amount": {
      "description": "The principal commitment amount of the credit facility as stated.",
      "rationale": "Quantifies the maximum borrowing capacity under the agreement."
    },
    "interest_rate_benchmark": {
      "description": "The reference benchmark rate for calculating interest (e.g., SOFR).",
      "rationale": "Determines the base index to which spreads are added for pricing."
    },
    "interest_rate_spread_bps": {
      "description": "The number of basis points added to the benchmark to arrive at the annual rate.",
      "rationale": "Captures the margin over the benchmark, reflecting credit risk pricing."
    },
    "effective_date": {
      "description": "The date on which the agreement becomes operative.",
      "rationale": "Marks the start of availability and accrual of obligations and interest."
    },
    "maturity_date": {
      "description": "The final date by which all obligations under the facility must be repaid.",
      "rationale": "Defines the term length and end of the borrowing period."
    },
    "governing_law": {
      "description": "The jurisdiction whose laws govern the interpretation and enforcement of the agreement.",
      "rationale": "Determines the legal framework and venue for dispute resolution."
    }
  }
}
(pretty-printed)
[schema_variants] LLM call attempt 1 – system prompt:
You are a research strategist charged with creating a **comprehensive extraction schema** that converts an SEC exhibit into a standardized tabular format.

Think first (internally) about:
  * Which thematic topics recur across similar exhibits.
  * Which distinct, observable facts analysts will query later.
  * Why each field is valuable downstream.

Do NOT include your reasoning in the response; return only the final JSON.

Return ONLY valid JSON with these keys:
  1. overview – Up to 10 sentences describing the purpose and coverage of the schema.
  2. topics   – Array of short phrases representing thematic areas.
  3. fields   – **Object** mapping each snake_case field name → object with:
        • description – one-sentence business meaning.
        • rationale   – why the field matters.

Do **NOT** wrap the JSON in triple back-ticks.

⚠️  Exclude generic EDGAR filing metadata (e.g., CIK, file number, exhibit number) or any information that can be reliably obtained from the filing header outside the exhibit text. Focus on facts that are observable **within the exhibit itself**.

Normal-form modelling:
If any concept in the exhibit can appear more than once, represent it as a repeating structure.
  • Define the field as an *array of objects*.
  • Attach a *json_schema* that describes the object’s keys and primitive types.
This rule applies universally; do not enumerate concrete instances.

Additional guiding principles:
• Observability – every field must be able to capture a value that is **verbatim** present in the exhibit text.  Omit fields that rely on external filing metadata or speculative information.
• Granularity – prefer the smallest unit of information that is still meaningful; for example, separate interest margin for different benchmarks instead of merging them into one generic field.
• Value–density – prioritise fields that deliver high analytical value per token.  Avoid very large arrays whose elements differ only in label (e.g., boiler-plate “Form of …” exhibit lists); use a concise summary field instead unless each element affects economics or legal obligations.
• Analytical variation – prioritise fields whose values can vary materially across documents and therefore inform downstream quantitative or logical reasoning.
• Static layout – omit fields whose primary purpose is to mirror the document’s physical structure (tables of contents, attachment labels, page numbers); if such data is still useful, summarise it in a single concise field.


Return a **balanced** schema – comprehensive but without speculative edge-case fields.
[EXHIBIT TEXT OMITTED]
[schema_variants] LLM response (attempt 1):
{
  "overview": "This schema extracts key deal terms from credit agreement exhibits, capturing contracting parties, facility structures, pricing, schedule, and governing law. It covers one or more credit facility tranches, interest rate benchmarks and spreads, effective and maturity dates, and applicable jurisdiction. Each field maps directly to text observable within the exhibit, enabling standardized comparison across agreements. Repeating elements like parties, facilities, and interest terms are modeled as arrays of objects. Date and amount fields are normalized for quantitative analysis. The schema omits header metadata and focuses strictly on substantive contractual provisions. It supports downstream queries on counterparty exposure, pricing variations, and legal context. By structuring core provisions, the schema facilitates automated portfolio monitoring and risk analytics.",
  "topics": [
    "Parties",
    "Credit Facility Terms",
    "Interest Rate Terms",
    "Effective Date",
    "Maturity Date",
    "Governing Law"
  ],
  "fields": {
    "effective_date": {
      "description": "The date when the agreement becomes effective as stated in the exhibit.",
      "rationale": "Marks the start of contractual obligations and timing of funding availability."
    },
    "parties": {
      "description": "List of named parties in the agreement with their contractual roles.",
      "rationale": "Identifies counterparties and their legal roles for exposure and compliance tracking.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    "credit_facilities": {
      "description": "Details of each credit facility tranche including type and principal amount.",
      "rationale": "Defines borrowing limits and facility structure for leverage and covenant analysis.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "facility_type": {
              "type": "string"
            },
            "principal_amount": {
              "type": "number"
            },
            "currency": {
              "type": "string"
            }
          },
          "required": [
            "facility_type",
            "principal_amount",
            "currency"
          ]
        }
      }
    },
    "interest_rate_terms": {
      "description": "Benchmark rate and spread for interest calculation as specified in the exhibit.",
      "rationale": "Captures pricing terms essential for cost of borrowing and sensitivity analysis.",
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "benchmark": {
              "type": "string"
            },
            "spread_basis_points": {
              "type": "integer"
            }
          },
          "required": [
            "benchmark",
            "spread_basis_points"
          ]
        }
      }
    },
    "maturity_date": {
      "description": "The date on which all credit facilities mature and must be repaid.",
      "rationale": "Defines the lifespan of the borrowing arrangement and end of credit availability."
    },
    "governing_law": {
      "description": "The jurisdiction whose laws govern the interpretation and enforcement of the agreement.",
      "rationale": "Determines legal framework and dispute resolution rules applicable to the contract."
    }
  }
}
(pretty-printed)
[schema_variants] Referee system prompt:
You are a meticulous reviewer. Choose the BEST extraction schema for the exhibit.

Judge each candidate using these criteria (in order of importance):
• Observability – every field should have a value that can be found verbatim in the exhibit text. Penalise reliance on external metadata.
• Normal-form – avoid redundant or duplicate fields; prefer proper use of repeating structures.
• Information-Completeness – capture as many distinct observable facts as possible *after* satisfying the above two criteria.
• Stability – field names remain valid if future exhibits add more items.
• Granularity – represent each logically independent concept as its own field.

Return ONLY valid JSON:
{
  "winner_index": <integer 0-based index of the best schema>,
  "reason": "single sentence rationale"
}
If two schemas are equally strong on the above criteria, prefer the one with clearer naming.

[schema_variants] Candidate schema 0:
{
  "overview": "This schema standardizes key economic, legal, and structural terms from a Master Credit Agreement exhibit into a tabular format. It captures parties, facility details, interest rate mechanics, maturity and repayment features, governing law, and ancillary provisions such as fees, prepayment options, covenants, and default events. Repeating concepts like multiple credit facilities, fee types, covenants, and notice rules are modeled as arrays of objects for full flexibility. Each field is based solely on text observable in the agreement. The schema omits generic EDGAR metadata and focuses on facts critical for downstream quantitative and legal analyses.",
  "topics": [
    "Parties",
    "Credit Facilities",
    "Interest Rate Terms",
    "Maturity and Repayment",
    "Governing Law",
    "Fees",
    "Prepayment",
    "Covenants",
    "Events of Default",
    "Notices",
    "Conditions Precedent",
    "Amendments",
    "Collateral"
  ],
  "fields": [
    {
      "name": "effective_date",
      "description": "The date on which the agreement becomes effective.",
      "rationale": "Enables timeline analyses and linking to other instruments.",
      "required": true
    },
    {
      "name": "parties",
      "description": "List of contracting entities and their roles.",
      "rationale": "Identifies obligations and rights assigned to each party.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    {
      "name": "facility_terms",
      "description": "Details of each credit facility provided under the agreement.",
      "rationale": "Captures principal amounts, currencies, durations, and amortization for risk and pricing analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "facility_type": {
              "type": "string"
            },
            "facility_amount": {
              "type": "number"
            },
            "facility_currency": {
              "type": "string"
            },
            "maturity_date": {
              "type": "string"
            },
            "payment_frequency": {
              "type": "string"
            },
            "amortization_schedule": {
              "type": "string"
            },
            "interest_rate_components": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "base_rate": {
                    "type": "string"
                  },
                  "spread_bps": {
                    "type": "number"
                  }
                },
                "required": [
                  "base_rate",
                  "spread_bps"
                ]
              }
            },
            "interest_rate_floor": {
              "type": "string"
            },
            "interest_rate_cap": {
              "type": "string"
            }
          },
          "required": [
            "facility_type",
            "facility_amount",
            "facility_currency",
            "maturity_date"
          ]
        }
      }
    },
    {
      "name": "governing_law",
      "description": "Jurisdiction whose laws govern the interpretation of the agreement.",
      "rationale": "Determines applicable legal regime and venue for disputes.",
      "required": true
    },
    {
      "name": "choice_of_forum",
      "description": "Designated forum or venue for resolving disputes under the agreement.",
      "rationale": "Specifies the agreed court or arbitration forum.",
      "required": true
    },
    {
      "name": "fee_provisions",
      "description": "All fees payable under the agreement, including commitment and facility fees.",
      "rationale": "Analyzes cost structure and fee income for the lender.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "fee_type": {
              "type": "string"
            },
            "fee_amount": {
              "type": "number"
            },
            "fee_currency": {
              "type": "string"
            },
            "fee_rate_bps": {
              "type": "number"
            },
            "fee_timing": {
              "type": "string"
            }
          },
          "required": [
            "fee_type"
          ]
        }
      }
    },
    {
      "name": "prepayment_provisions",
      "description": "Terms governing optional or mandatory prepayments of principal.",
      "rationale": "Impacts cash flow modeling and penalty assessments.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "prepayment_type": {
              "type": "string"
            },
            "terms": {
              "type": "string"
            }
          },
          "required": [
            "prepayment_type"
          ]
        }
      }
    },
    {
      "name": "covenants",
      "description": "Borrower covenants and obligations specified in the agreement.",
      "rationale": "Used to monitor compliance and trigger events of default.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "covenant_type": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "covenant_type"
          ]
        }
      }
    },
    {
      "name": "events_of_default",
      "description": "Events or conditions that constitute a default under the agreement.",
      "rationale": "Identifies triggers for lender remedies and acceleration.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "event_description": {
              "type": "string"
            }
          },
          "required": [
            "event_description"
          ]
        }
      }
    },
    {
      "name": "notices",
      "description": "Procedures for delivering contractual notices to each party.",
      "rationale": "Ensures enforceability of communications and waivers.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "to_party": {
              "type": "string"
            },
            "method": {
              "type": "string"
            },
            "address": {
              "type": "string"
            }
          },
          "required": [
            "to_party",
            "method"
          ]
        }
      }
    },
    {
      "name": "conditions_precedent",
      "description": "Conditions that must be satisfied before funding of the facility.",
      "rationale": "Determines when lender obligations commence and risk is assumed.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "condition_text": {
              "type": "string"
            }
          },
          "required": [
            "condition_text"
          ]
        }
      }
    },
    {
      "name": "amendment_provisions",
      "description": "Rules and thresholds for amending the agreement post-closing.",
      "rationale": "Defines governance for changes to material terms.",
      "required": true,
      "json_schema": {
        "type": "object",
        "properties": {
          "amendment_conditions": {
            "type": "string"
          }
        },
        "required": [
          "amendment_conditions"
        ]
      }
    },
    {
      "name": "collateral_provisions",
      "description": "Descriptions of collateral securing the obligations under the agreement.",
      "rationale": "Key input for secured lending analysis and recovery estimates.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "collateral_description": {
              "type": "string"
            },
            "security_interest": {
              "type": "string"
            },
            "lien_priority": {
              "type": "string"
            }
          },
          "required": [
            "collateral_description"
          ]
        }
      }
    }
  ]
}
[schema_variants] Candidate schema 1:
{
  "overview": "This schema captures the essential, observable provisions of a Master Credit Agreement exhibit. It extracts the transacting parties and their roles, the type and amount of the credit facility, the interest rate benchmark and spread, the effective and maturity dates, and the governing law. Each field maps directly to verbatim text in the agreement. Repeating concepts (e.g., parties) are represented as arrays of objects. The schema omits generic EDGAR metadata and focuses solely on facts within the exhibit that analysts will query. It ensures consistent downstream quantitative analysis of credit terms across similar agreements.",
  "topics": [
    "Parties and roles",
    "Facility type and amount",
    "Interest rate structure",
    "Key dates",
    "Governing law"
  ],
  "fields": [
    {
      "name": "parties",
      "description": "List of entities to the agreement with their contractual roles.",
      "rationale": "Identifies each signatory and their role for counterparty analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    {
      "name": "facility_type",
      "description": "The category of credit facility provided (e.g., revolving credit).",
      "rationale": "Distinguishes among different financing structures and their terms.",
      "required": true
    },
    {
      "name": "facility_amount",
      "description": "The principal commitment amount of the credit facility as stated.",
      "rationale": "Quantifies the maximum borrowing capacity under the agreement.",
      "required": true
    },
    {
      "name": "interest_rate_benchmark",
      "description": "The reference benchmark rate for calculating interest (e.g., SOFR).",
      "rationale": "Determines the base index to which spreads are added for pricing.",
      "required": true
    },
    {
      "name": "interest_rate_spread_bps",
      "description": "The number of basis points added to the benchmark to arrive at the annual rate.",
      "rationale": "Captures the margin over the benchmark, reflecting credit risk pricing.",
      "required": true
    },
    {
      "name": "effective_date",
      "description": "The date on which the agreement becomes operative.",
      "rationale": "Marks the start of availability and accrual of obligations and interest.",
      "required": true
    },
    {
      "name": "maturity_date",
      "description": "The final date by which all obligations under the facility must be repaid.",
      "rationale": "Defines the term length and end of the borrowing period.",
      "required": true
    },
    {
      "name": "governing_law",
      "description": "The jurisdiction whose laws govern the interpretation and enforcement of the agreement.",
      "rationale": "Determines the legal framework and venue for dispute resolution.",
      "required": true
    }
  ]
}
[schema_variants] Candidate schema 2:
{
  "overview": "This schema extracts key deal terms from credit agreement exhibits, capturing contracting parties, facility structures, pricing, schedule, and governing law. It covers one or more credit facility tranches, interest rate benchmarks and spreads, effective and maturity dates, and applicable jurisdiction. Each field maps directly to text observable within the exhibit, enabling standardized comparison across agreements. Repeating elements like parties, facilities, and interest terms are modeled as arrays of objects. Date and amount fields are normalized for quantitative analysis. The schema omits header metadata and focuses strictly on substantive contractual provisions. It supports downstream queries on counterparty exposure, pricing variations, and legal context. By structuring core provisions, the schema facilitates automated portfolio monitoring and risk analytics.",
  "topics": [
    "Parties",
    "Credit Facility Terms",
    "Interest Rate Terms",
    "Effective Date",
    "Maturity Date",
    "Governing Law"
  ],
  "fields": [
    {
      "name": "effective_date",
      "description": "The date when the agreement becomes effective as stated in the exhibit.",
      "rationale": "Marks the start of contractual obligations and timing of funding availability.",
      "required": true
    },
    {
      "name": "parties",
      "description": "List of named parties in the agreement with their contractual roles.",
      "rationale": "Identifies counterparties and their legal roles for exposure and compliance tracking.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    {
      "name": "credit_facilities",
      "description": "Details of each credit facility tranche including type and principal amount.",
      "rationale": "Defines borrowing limits and facility structure for leverage and covenant analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "facility_type": {
              "type": "string"
            },
            "principal_amount": {
              "type": "number"
            },
            "currency": {
              "type": "string"
            }
          },
          "required": [
            "facility_type",
            "principal_amount",
            "currency"
          ]
        }
      }
    },
    {
      "name": "interest_rate_terms",
      "description": "Benchmark rate and spread for interest calculation as specified in the exhibit.",
      "rationale": "Captures pricing terms essential for cost of borrowing and sensitivity analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "benchmark": {
              "type": "string"
            },
            "spread_basis_points": {
              "type": "integer"
            }
          },
          "required": [
            "benchmark",
            "spread_basis_points"
          ]
        }
      }
    },
    {
      "name": "maturity_date",
      "description": "The date on which all credit facilities mature and must be repaid.",
      "rationale": "Defines the lifespan of the borrowing arrangement and end of credit availability.",
      "required": true
    },
    {
      "name": "governing_law",
      "description": "The jurisdiction whose laws govern the interpretation and enforcement of the agreement.",
      "rationale": "Determines legal framework and dispute resolution rules applicable to the contract.",
      "required": true
    }
  ]
}
[schema_variants] Merge candidate 0:
{
  "overview": "This schema standardizes key economic, legal, and structural terms from a Master Credit Agreement exhibit into a tabular format. It captures parties, facility details, interest rate mechanics, maturity and repayment features, governing law, and ancillary provisions such as fees, prepayment options, covenants, and default events. Repeating concepts like multiple credit facilities, fee types, covenants, and notice rules are modeled as arrays of objects for full flexibility. Each field is based solely on text observable in the agreement. The schema omits generic EDGAR metadata and focuses on facts critical for downstream quantitative and legal analyses.",
  "topics": [
    "Parties",
    "Credit Facilities",
    "Interest Rate Terms",
    "Maturity and Repayment",
    "Governing Law",
    "Fees",
    "Prepayment",
    "Covenants",
    "Events of Default",
    "Notices",
    "Conditions Precedent",
    "Amendments",
    "Collateral"
  ],
  "fields": [
    {
      "name": "effective_date",
      "description": "The date on which the agreement becomes effective.",
      "rationale": "Enables timeline analyses and linking to other instruments.",
      "required": true
    },
    {
      "name": "parties",
      "description": "List of contracting entities and their roles.",
      "rationale": "Identifies obligations and rights assigned to each party.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    {
      "name": "facility_terms",
      "description": "Details of each credit facility provided under the agreement.",
      "rationale": "Captures principal amounts, currencies, durations, and amortization for risk and pricing analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "facility_type": {
              "type": "string"
            },
            "facility_amount": {
              "type": "number"
            },
            "facility_currency": {
              "type": "string"
            },
            "maturity_date": {
              "type": "string"
            },
            "payment_frequency": {
              "type": "string"
            },
            "amortization_schedule": {
              "type": "string"
            },
            "interest_rate_components": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "base_rate": {
                    "type": "string"
                  },
                  "spread_bps": {
                    "type": "number"
                  }
                },
                "required": [
                  "base_rate",
                  "spread_bps"
                ]
              }
            },
            "interest_rate_floor": {
              "type": "string"
            },
            "interest_rate_cap": {
              "type": "string"
            }
          },
          "required": [
            "facility_type",
            "facility_amount",
            "facility_currency",
            "maturity_date"
          ]
        }
      }
    },
    {
      "name": "governing_law",
      "description": "Jurisdiction whose laws govern the interpretation of the agreement.",
      "rationale": "Determines applicable legal regime and venue for disputes.",
      "required": true
    },
    {
      "name": "choice_of_forum",
      "description": "Designated forum or venue for resolving disputes under the agreement.",
      "rationale": "Specifies the agreed court or arbitration forum.",
      "required": true
    },
    {
      "name": "fee_provisions",
      "description": "All fees payable under the agreement, including commitment and facility fees.",
      "rationale": "Analyzes cost structure and fee income for the lender.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "fee_type": {
              "type": "string"
            },
            "fee_amount": {
              "type": "number"
            },
            "fee_currency": {
              "type": "string"
            },
            "fee_rate_bps": {
              "type": "number"
            },
            "fee_timing": {
              "type": "string"
            }
          },
          "required": [
            "fee_type"
          ]
        }
      }
    },
    {
      "name": "prepayment_provisions",
      "description": "Terms governing optional or mandatory prepayments of principal.",
      "rationale": "Impacts cash flow modeling and penalty assessments.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "prepayment_type": {
              "type": "string"
            },
            "terms": {
              "type": "string"
            }
          },
          "required": [
            "prepayment_type"
          ]
        }
      }
    },
    {
      "name": "covenants",
      "description": "Borrower covenants and obligations specified in the agreement.",
      "rationale": "Used to monitor compliance and trigger events of default.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "covenant_type": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "covenant_type"
          ]
        }
      }
    },
    {
      "name": "events_of_default",
      "description": "Events or conditions that constitute a default under the agreement.",
      "rationale": "Identifies triggers for lender remedies and acceleration.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "event_description": {
              "type": "string"
            }
          },
          "required": [
            "event_description"
          ]
        }
      }
    },
    {
      "name": "notices",
      "description": "Procedures for delivering contractual notices to each party.",
      "rationale": "Ensures enforceability of communications and waivers.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "to_party": {
              "type": "string"
            },
            "method": {
              "type": "string"
            },
            "address": {
              "type": "string"
            }
          },
          "required": [
            "to_party",
            "method"
          ]
        }
      }
    },
    {
      "name": "conditions_precedent",
      "description": "Conditions that must be satisfied before funding of the facility.",
      "rationale": "Determines when lender obligations commence and risk is assumed.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "condition_text": {
              "type": "string"
            }
          },
          "required": [
            "condition_text"
          ]
        }
      }
    },
    {
      "name": "amendment_provisions",
      "description": "Rules and thresholds for amending the agreement post-closing.",
      "rationale": "Defines governance for changes to material terms.",
      "required": true,
      "json_schema": {
        "type": "object",
        "properties": {
          "amendment_conditions": {
            "type": "string"
          }
        },
        "required": [
          "amendment_conditions"
        ]
      }
    },
    {
      "name": "collateral_provisions",
      "description": "Descriptions of collateral securing the obligations under the agreement.",
      "rationale": "Key input for secured lending analysis and recovery estimates.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "collateral_description": {
              "type": "string"
            },
            "security_interest": {
              "type": "string"
            },
            "lien_priority": {
              "type": "string"
            }
          },
          "required": [
            "collateral_description"
          ]
        }
      }
    }
  ]
}
[schema_variants] Merge candidate 1:
{
  "overview": "This schema captures the essential, observable provisions of a Master Credit Agreement exhibit. It extracts the transacting parties and their roles, the type and amount of the credit facility, the interest rate benchmark and spread, the effective and maturity dates, and the governing law. Each field maps directly to verbatim text in the agreement. Repeating concepts (e.g., parties) are represented as arrays of objects. The schema omits generic EDGAR metadata and focuses solely on facts within the exhibit that analysts will query. It ensures consistent downstream quantitative analysis of credit terms across similar agreements.",
  "topics": [
    "Parties and roles",
    "Facility type and amount",
    "Interest rate structure",
    "Key dates",
    "Governing law"
  ],
  "fields": [
    {
      "name": "parties",
      "description": "List of entities to the agreement with their contractual roles.",
      "rationale": "Identifies each signatory and their role for counterparty analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    {
      "name": "facility_type",
      "description": "The category of credit facility provided (e.g., revolving credit).",
      "rationale": "Distinguishes among different financing structures and their terms.",
      "required": true
    },
    {
      "name": "facility_amount",
      "description": "The principal commitment amount of the credit facility as stated.",
      "rationale": "Quantifies the maximum borrowing capacity under the agreement.",
      "required": true
    },
    {
      "name": "interest_rate_benchmark",
      "description": "The reference benchmark rate for calculating interest (e.g., SOFR).",
      "rationale": "Determines the base index to which spreads are added for pricing.",
      "required": true
    },
    {
      "name": "interest_rate_spread_bps",
      "description": "The number of basis points added to the benchmark to arrive at the annual rate.",
      "rationale": "Captures the margin over the benchmark, reflecting credit risk pricing.",
      "required": true
    },
    {
      "name": "effective_date",
      "description": "The date on which the agreement becomes operative.",
      "rationale": "Marks the start of availability and accrual of obligations and interest.",
      "required": true
    },
    {
      "name": "maturity_date",
      "description": "The final date by which all obligations under the facility must be repaid.",
      "rationale": "Defines the term length and end of the borrowing period.",
      "required": true
    },
    {
      "name": "governing_law",
      "description": "The jurisdiction whose laws govern the interpretation and enforcement of the agreement.",
      "rationale": "Determines the legal framework and venue for dispute resolution.",
      "required": true
    }
  ]
}
[schema_variants] Merge candidate 2:
{
  "overview": "This schema extracts key deal terms from credit agreement exhibits, capturing contracting parties, facility structures, pricing, schedule, and governing law. It covers one or more credit facility tranches, interest rate benchmarks and spreads, effective and maturity dates, and applicable jurisdiction. Each field maps directly to text observable within the exhibit, enabling standardized comparison across agreements. Repeating elements like parties, facilities, and interest terms are modeled as arrays of objects. Date and amount fields are normalized for quantitative analysis. The schema omits header metadata and focuses strictly on substantive contractual provisions. It supports downstream queries on counterparty exposure, pricing variations, and legal context. By structuring core provisions, the schema facilitates automated portfolio monitoring and risk analytics.",
  "topics": [
    "Parties",
    "Credit Facility Terms",
    "Interest Rate Terms",
    "Effective Date",
    "Maturity Date",
    "Governing Law"
  ],
  "fields": [
    {
      "name": "effective_date",
      "description": "The date when the agreement becomes effective as stated in the exhibit.",
      "rationale": "Marks the start of contractual obligations and timing of funding availability.",
      "required": true
    },
    {
      "name": "parties",
      "description": "List of named parties in the agreement with their contractual roles.",
      "rationale": "Identifies counterparties and their legal roles for exposure and compliance tracking.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string"
            },
            "name": {
              "type": "string"
            }
          },
          "required": [
            "role",
            "name"
          ]
        }
      }
    },
    {
      "name": "credit_facilities",
      "description": "Details of each credit facility tranche including type and principal amount.",
      "rationale": "Defines borrowing limits and facility structure for leverage and covenant analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "facility_type": {
              "type": "string"
            },
            "principal_amount": {
              "type": "number"
            },
            "currency": {
              "type": "string"
            }
          },
          "required": [
            "facility_type",
            "principal_amount",
            "currency"
          ]
        }
      }
    },
    {
      "name": "interest_rate_terms",
      "description": "Benchmark rate and spread for interest calculation as specified in the exhibit.",
      "rationale": "Captures pricing terms essential for cost of borrowing and sensitivity analysis.",
      "required": true,
      "json_schema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "benchmark": {
              "type": "string"
            },
            "spread_basis_points": {
              "type": "integer"
            }
          },
          "required": [
            "benchmark",
            "spread_basis_points"
          ]
        }
      }
    },
    {
      "name": "maturity_date",
      "description": "The date on which all credit facilities mature and must be repaid.",
      "rationale": "Defines the lifespan of the borrowing arrangement and end of credit availability.",
      "required": true
    },
    {
      "name": "governing_law",
      "description": "The jurisdiction whose laws govern the interpretation and enforcement of the agreement.",
      "rationale": "Determines legal framework and dispute resolution rules applicable to the contract.",
      "required": true
    }
  ]
}
