\documentclass[10pt,letterpaper]{article}
\usepackage[margin=0.7in]{geometry}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{tcolorbox}
\usepackage{fontspec}
\setmonofont{Courier New}

% JSON syntax highlighting
\definecolor{json-delim}{RGB}{20,105,176}
\definecolor{json-string}{RGB}{163,21,21}
\definecolor{json-number}{RGB}{0,128,0}
\definecolor{json-property}{RGB}{0,0,139}
\definecolor{background}{RGB}{248,248,248}

\lstdefinelanguage{json}{
    basicstyle=\scriptsize\ttfamily,
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    string=[s]{"}{"},
    stringstyle=\color{json-string},
    literate=
        *{0}{{{\color{json-number}0}}}{1}
        {1}{{{\color{json-number}1}}}{1}
        {2}{{{\color{json-number}2}}}{1}
        {3}{{{\color{json-number}3}}}{1}
        {4}{{{\color{json-number}4}}}{1}
        {5}{{{\color{json-number}5}}}{1}
        {6}{{{\color{json-number}6}}}{1}
        {7}{{{\color{json-number}7}}}{1}
        {8}{{{\color{json-number}8}}}{1}
        {9}{{{\color{json-number}9}}}{1}
        {:}{{{\color{json-delim}:}}}{1}
        {,}{{{\color{json-delim},}}}{1}
        {\{}{{{\color{json-delim}\{}}}{1}
        {\}}{{{\color{json-delim}\}}}}{1}
        {[}{{{\color{json-delim}[}}}{1}
        {]}{{{\color{json-delim}]}}}{1}
        {true}{{{\color{json-property}true}}}{4}
        {false}{{{\color{json-property}false}}}{5}
        {null}{{{\color{gray}null}}}{4},
}

\lstdefinestyle{prompt}{
    basicstyle=\tiny\ttfamily,
    frame=single,
    backgroundcolor=\color{gray!5},
    breaklines=true,
    breakatwhitespace=true,
    numbers=none
}

\title{\textbf{Universal Debt Document Extraction}\\
\large Complete Extraction System and Results}
\author{EDGAR-AI System}
\date{August 1, 2025}

\pagestyle{fancy}
\fancyhf{}
\rhead{Debt Extraction System}
\lhead{EDGAR-AI}
\cfoot{\thepage}

\begin{document}

\maketitle

\section{Overview}

This document presents a complete debt document extraction system using natural language instructions with GPT-4.1-nano. The system extracts economic terms from debt documents and converts them into structured JSON suitable for quantitative analysis.

\subsection{Key Features}
\begin{itemize}
    \item Natural language prompt (343 lines) instructs extraction
    \item Standardizes all numbers for analysis (amounts, rates, dates)
    \item Adapts to document complexity (simple notes to syndicated facilities)
    \item Production-ready JSON output
\end{itemize}

\section{Complete Extraction Prompt}

The following pages contain the full natural language prompt used to instruct the model:

\input{full_prompt_section}

\newpage
\section{Extraction Results}

\subsection{Document 1: RF Monolithics Commercial Loan}

\begin{tcolorbox}[colback=blue!5!white,colframe=blue!75!black]
\textbf{Summary}
\begin{itemize}
    \item Document: Commercial Loan Agreement (Exhibit 10.38)
    \item Borrower: RF Monolithics, Inc.
    \item Lender: Viewpoint Bank
    \item Principal: \$900,000
    \item Rate: Prime + 1\% (floor 6.5\%)
    \item Maturity: April 23, 2014
\end{itemize}
\end{tcolorbox}

\subsubsection{Extracted JSON}
\lstinputlisting[language=json]{extractions/rf_monolithics_clean/extracted_terms.json}

\newpage
\subsection{Document 2: Syndicated Credit Agreement}

\begin{tcolorbox}[colback=green!5!white,colframe=green!75!black]
\textbf{Summary}
\begin{itemize}
    \item Document: Credit Agreement
    \item Borrowers: Weekly Reader Corporation, JLC Learning Corporation
    \item Total Facilities: \$171,000,000
    \item Structure: Revolving (\$30M), Term Loans (\$131M), L/C (\$5M), Swing Line (\$5M)
    \item Agent: Bank of America, N.A.
    \item Effective Date: November 17, 1999
\end{itemize}
\end{tcolorbox}

\subsubsection{Extracted JSON}
\lstinputlisting[language=json]{extractions/syndicated_clean/extracted_terms.json}

\section{Key Achievements}

\subsection{Standardization Success}
\begin{itemize}
    \item \textbf{Monetary Amounts}: Converted to pure numbers (900000, 171000000)
    \item \textbf{Interest Rates}: Standardized to basis points (100 bps = 1\%)
    \item \textbf{Dates}: Consistent YYYY-MM-DD format
    \item \textbf{Entity Classification}: Uniform role taxonomy
\end{itemize}

\subsection{Adaptive Extraction}
\begin{itemize}
    \item \textbf{Simple Documents}: Sparse arrays with only relevant data
    \item \textbf{Complex Documents}: Rich nested structures for multi-party facilities
    \item \textbf{No Hallucination}: Null values where information not present
\end{itemize}

\subsection{Production Readiness}
The consistent JSON output enables:
\begin{itemize}
    \item Direct database insertion without transformation
    \item Portfolio-level aggregation and analysis
    \item Automated covenant monitoring
    \item Regulatory reporting compliance
\end{itemize}

\end{document}